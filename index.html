<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cv Forge | Multi-Lang AI 2026</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Almarai:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root { 
            --primary: #0f172a; --accent: #38bdf8; --success: #22c55e; 
            --bg-grad: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #1e293b; --text-muted: #64748b;
            --input-bg: #ffffff; --border: #e2e8f0; --danger: #ef4444;
        }

        body.dark-mode {
            --primary: #f8fafc; --accent: #38bdf8; --bg-grad: #020617;
            --card-bg: #1e293b; --text-main: #f1f5f9; --text-muted: #94a3b8;
            --input-bg: #0f172a; --border: #334155;
        }

        * { box-sizing: border-box; transition: 0.3s ease; }
        body { margin: 0; background: var(--bg-grad); font-family: 'Cairo', sans-serif; color: var(--text-main); min-height: 100vh; }

        header { 
            width: 100%; padding: 15px 30px; background: var(--input-bg);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
        }

        .logo-box { font-family: 'Almarai'; font-size: 22px; font-weight: 900; display: flex; align-items: center; gap: 8px; }
        .logo-box span { color: var(--accent); }

        .app-wrapper { max-width: 900px; margin: 30px auto; padding: 0 20px; }
        .main-card { background: var(--card-bg); border-radius: 24px; padding: 40px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); border: 1px solid var(--border); }
        
        .section-label { font-size: 13px; font-weight: 900; color: var(--accent); margin: 30px 0 20px; display: flex; align-items: center; gap: 10px; text-transform: uppercase; }
        .section-label::after { content: ""; flex: 1; height: 1px; background: var(--border); }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
        label { display: block; font-weight: 700; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
        input, textarea { width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 12px; background: var(--input-bg); color: var(--text-main); font-family: inherit; outline: none; }
        
        /* أزرار التحميل الملونة */
        .download-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-top: 30px; }
        .btn-dl { padding: 15px; border: none; border-radius: 12px; cursor: pointer; color: white; font-weight: 800; font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-ar { background: #0f172a; } .btn-en { background: #0284c7; } .btn-fr { background: #e11d48; }
        .btn-it { background: #16a34a; } .btn-es { background: #d97706; } .btn-de { background: #4b5563; }
        .btn-dl:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

        .error-input { border-color: var(--danger) !important; animation: shake 0.4s; }
        @keyframes shake { 0%, 100% {transform:translateX(0)} 25% {transform:translateX(-5px)} 75% {transform:translateX(5px)} }

        /* PDF Render Zone */
        #pdf-render-zone { position: absolute; top: -20000px; left: -20000px; }
        .pdf-page { width: 210mm; height: 297mm; background: white; display: flex; }
        .pdf-sidebar { width: 75mm; background: #1e293b; color: white; padding: 40px 25px; }
        .pdf-main { flex: 1; background: white; padding: 50px 40px; color: #1e293b; }
        .pdf-section-h { font-size: 18px; font-weight: 900; color: #0f172a; border-left: 5px solid #38bdf8; padding-left: 12px; margin: 30px 0 15px; }
        .rtl { direction: rtl; } .ltr { direction: ltr; }
        .ltr .pdf-section-h { border-left: none; border-right: 5px solid #38bdf8; padding-right: 12px; text-align: left; }
    </style>
</head>
<body>

    <header>
        <div class="logo-box"><i class="fas fa-magic"></i> CV<span>FORGE</span> AI</div>
        <div class="theme-toggle" onclick="document.body.classList.toggle('dark-mode')"><i class="fas fa-moon"></i></div>
    </header>

    <div class="app-wrapper">
        <div class="main-card">
            <div class="section-label">البيانات الشخصية</div>
            <div class="grid">
                <div><label>الاسم الكامل</label><input type="text" id="inName" class="req" placeholder="محمد علي"></div>
                <div><label>المسمى الوظيفي</label><input type="text" id="inJob" class="req" oninput="generateAI()" placeholder="طبيب"></div>
            </div>
            <div class="grid">
                <div><label>عدد سنوات الخبرة</label><input type="number" id="inExpYears" oninput="generateAI()" placeholder="5"></div>
                <div><label>رقم الهاتف</label><input type="text" id="inPhone" class="req"></div>
            </div>
            <div class="grid">
                <div><label>البريد الإلكتروني</label><input type="email" id="inEmail" class="req"></div>
                <div><label>الصورة</label><input type="file" id="inPhoto" accept="image/*"></div>
            </div>

            <div class="section-label">المحتوى الذكي</div>
            <div><label>النبذة (تتولد تلقائياً)</label><textarea id="inAbout" rows="4"></textarea></div>
            <div style="margin-top:15px;"><label>الخبرات (تتولد تلقائياً)</label><textarea id="inExp" rows="4"></textarea></div>

            <div class="section-label">تحميل الـ PDF باللغة المطلوبة</div>
            <div class="download-grid">
                <button class="btn-dl btn-ar" onclick="processAndDownload('ar')"><i class="fas fa-file-pdf"></i> العربية</button>
                <button class="btn-dl btn-en" onclick="processAndDownload('en')"><i class="fas fa-file-pdf"></i> English</button>
                <button class="btn-dl btn-fr" onclick="processAndDownload('fr')"><i class="fas fa-file-pdf"></i> Français</button>
                <button class="btn-dl btn-it" onclick="processAndDownload('it')"><i class="fas fa-file-pdf"></i> Italiano</button>
                <button class="btn-dl btn-es" onclick="processAndDownload('es')"><i class="fas fa-file-pdf"></i> Español</button>
                <button class="btn-dl btn-de" onclick="processAndDownload('de')"><i class="fas fa-file-pdf"></i> Deutsch</button>
            </div>
        </div>
    </div>

    <div id="pdf-render-zone">
        <div id="pdf-doc" class="pdf-page">
            <div class="pdf-sidebar">
                <div style="width:120px; height:120px; background:#334155; border-radius:15px; margin:0 auto 30px; overflow:hidden;">
                    <img id="outPhoto" style="width:100%; height:100%; object-fit:cover;">
                </div>
                <div style="color:#38bdf8; font-weight:900; margin-bottom:10px;" id="pdf-label-contact">CONTACT</div>
                <div id="outPhone" style="font-size:12px; margin-bottom:5px;"></div>
                <div id="outEmail" style="font-size:12px;"></div>
            </div>
            <div class="pdf-main">
                <h1 id="outName" style="font-size:35px; margin:0;"></h1>
                <h3 id="outJob" style="color:#38bdf8; margin-top:5px;"></h3>
                <div class="pdf-section-h" id="pdf-label-about">About Me</div>
                <div id="outAbout" style="font-size:12px; line-height:1.6;"></div>
                <div class="pdf-section-h" id="pdf-label-exp">Work Experience</div>
                <div id="outExp" style="font-size:12px; line-height:1.6;"></div>
            </div>
        </div>
    </div>

    <script>
        const translations = {
            ar: { contact: "اتصال", about: "الملف الشخصي", exp: "الخبرة المهنية", dir: "rtl" },
            en: { contact: "CONTACT", about: "PROFESSIONAL SUMMARY", exp: "WORK EXPERIENCE", dir: "ltr" },
            fr: { contact: "CONTACT", about: "RÉSUMÉ PROFESSIONNEL", exp: "EXPÉRIENCE", dir: "ltr" },
            it: { contact: "CONTATTI", about: "PROFILO", exp: "ESPERIENZA", dir: "ltr" },
            es: { contact: "CONTACTO", about: "PERFIL", exp: "EXPERIENCIA", dir: "ltr" },
            de: { contact: "KONTAKT", about: "PROFIL", exp: "BERUFSERFAHRUNG", dir: "ltr" }
        };

        function generateAI() {
            const job = document.getElementById('inJob').value || "خبير";
            const years = document.getElementById('inExpYears').value || "0";
            
            document.getElementById('inAbout').value = `بصفتي ${job}، أمتلك شغفاً كبيراً بتطوير العمل وتقديم حلول مبتكرة.\nأهتم جداً بالتفاصيل الدقيقة وضمان الجودة في كافة المهام.\nلدي مهارات تواصل ممتازة وقدرة على قيادة الفرق بفعالية.\nأطمح للمساهمة في نجاح المؤسسة من خلال خبراتي المتنوعة.\nأؤمن بالتعلم المستمر ومواكبة كل ما هو جديد في مجالي.`;
            
            document.getElementById('inExp').value = `• خبرة تمتد لـ ${years} سنوات في مجال الـ ${job}.\n• العمل على مشاريع ضخمة وتحقيق نتائج قياسية.\n• تطوير استراتيجيات عمل ساهمت في توفير الوقت والجهد.\n• التعاون مع فرق متعددة التخصصات لإنجاز الأهداف بدقة.`;
        }

        async function processAndDownload(lang) {
            // 1. فحص البيانات
            const reqs = document.querySelectorAll('.req');
            let empty = false;
            reqs.forEach(r => {
                if(!r.value) { r.classList.add('error-input'); empty = true; }
                else { r.classList.remove('error-input'); }
            });
            if(empty) { alert("أكمل البيانات أولاً يا بطل!"); return; }

            // 2. تعبئة الـ PDF بالترجمة
            const t = translations[lang];
            const pdfDoc = document.getElementById('pdf-doc');
            pdfDoc.className = `pdf-page ${t.dir}`;
            
            document.getElementById('pdf-label-contact').innerText = t.contact;
            document.getElementById('pdf-label-about').innerText = t.about;
            document.getElementById('pdf-label-exp').innerText = t.exp;

            document.getElementById('outName').innerText = document.getElementById('inName').value;
            document.getElementById('outJob').innerText = document.getElementById('inJob').value;
            document.getElementById('outPhone').innerText = document.getElementById('inPhone').value;
            document.getElementById('outEmail').innerText = document.getElementById('inEmail').value;
            document.getElementById('outAbout').innerText = document.getElementById('inAbout').value;
            document.getElementById('outExp').innerText = document.getElementById('inExp').value;

            // 3. التحميل
            const canvas = await html2canvas(pdfDoc, { scale: 3 });
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            doc.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 210, 297);
            doc.save(`CV_${lang}.pdf`);
        }

        document.getElementById('inPhoto').onchange = e => {
            const reader = new FileReader();
            reader.onload = () => document.getElementById('outPhoto').src = reader.result;
            reader.readAsDataURL(e.target.files[0]);
        };
    </script>
</body>
</html>
