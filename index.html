<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cv Forge | AI Ultimate Pro 2026</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Almarai:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root { 
            --primary: #0f172a; --accent: #38bdf8; --success: #22c55e; 
            --bg-grad: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #1e293b; --text-muted: #64748b;
            --input-bg: #ffffff; --border: #e2e8f0; --danger: #ef4444;
        }

        body.dark-mode {
            --primary: #f8fafc; --accent: #38bdf8; --bg-grad: #020617;
            --card-bg: #1e293b; --text-main: #f1f5f9; --text-muted: #94a3b8;
            --input-bg: #0f172a; --border: #334155;
        }

        * { box-sizing: border-box; transition: 0.3s ease; }
        body { margin: 0; background: var(--bg-grad); font-family: 'Cairo', sans-serif; color: var(--text-main); min-height: 100vh; }

        header { 
            width: 100%; padding: 15px 30px; background: var(--input-bg);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
        }

        .logo-box { font-family: 'Almarai'; font-size: 22px; font-weight: 900; display: flex; align-items: center; gap: 8px; }
        .logo-box i { color: var(--accent); }

        .controls { display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .lang-select { background: rgba(0,0,0,0.05); padding: 4px; border-radius: 12px; display: flex; gap: 2px; }
        .lang-btn { border: none; padding: 6px 10px; border-radius: 8px; cursor: pointer; font-size: 10px; font-weight: bold; background: transparent; color: var(--text-muted); }
        .lang-btn.active { background: var(--accent); color: white; }
        .theme-toggle { cursor: pointer; font-size: 20px; color: var(--accent); }

        .app-wrapper { max-width: 900px; margin: 30px auto; padding: 0 20px; }
        .main-card { background: var(--card-bg); border-radius: 24px; padding: 40px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); border: 1px solid var(--border); }
        
        .section-label { font-size: 13px; font-weight: 900; color: var(--accent); margin: 30px 0 20px; display: flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .section-label::after { content: ""; flex: 1; height: 1px; background: var(--border); }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
        @media (max-width: 650px) { .grid { grid-template-columns: 1fr; } }

        label { display: block; font-weight: 700; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
        input, textarea { width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 12px; background: var(--input-bg); color: var(--text-main); font-family: inherit; outline: none; }
        input:focus, textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.1); }
        
        .error-input { border-color: var(--danger) !important; animation: shake 0.5s; }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }

        .btn-download { width: 100%; padding: 20px; background: var(--accent); color: #0f172a; border: none; border-radius: 18px; font-size: 18px; font-weight: 900; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; margin-top: 30px; box-shadow: 0 10px 20px rgba(56, 189, 248, 0.2); }

        /* PDF Styles */
        #pdf-render-zone { position: absolute; top: -20000px; left: -20000px; }
        .pdf-page { width: 210mm; height: 297mm; background: white; display: flex; direction: rtl; }
        .pdf-page.ltr { direction: ltr; }
        .pdf-sidebar { width: 75mm; background: #1e293b; color: white; padding: 40px 25px; display: flex; flex-direction: column; }
        .pdf-main { flex: 1; background: white; padding: 50px 40px; color: #1e293b; }
        .pdf-photo-box { width: 130px; height: 130px; border-radius: 20px; background: #334155; margin: 0 auto 30px; border: 4px solid #38bdf8; overflow: hidden; }
        .pdf-side-h { font-size: 16px; font-weight: 900; color: #38bdf8; margin-top: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; margin-bottom: 15px; }
        .pdf-side-text { font-size: 11px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; color: #cbd5e1; }
        .pdf-name { font-size: 36px; font-weight: 900; margin: 0; color: #0f172a; }
        .pdf-job { font-size: 18px; color: #38bdf8; font-weight: 700; margin: 5px 0 40px; }
        .pdf-section-h { font-size: 18px; font-weight: 900; color: #0f172a; border-left: 5px solid #38bdf8; padding-left: 12px; margin: 35px 0 15px; }
        .pdf-page.ltr .pdf-section-h { border-left: none; border-right: 5px solid #38bdf8; padding-right: 12px; text-align: left; }
        .pdf-body-text { font-size: 13px; line-height: 1.7; white-space: pre-line; color: #334155; }

        #status-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); z-index: 2000; align-items: center; justify-content: center; }
        .modal { background: var(--card-bg); padding: 40px; border-radius: 30px; text-align: center; width: 320px; }
    </style>
</head>
<body id="body">

    <header>
        <div class="logo-box"><i class="fas fa-gem"></i> CV<span>FORGE</span></div>
        <div class="controls">
            <div class="lang-select">
                <button class="lang-btn active" onclick="setLang('ar', this)">AR</button>
                <button class="lang-btn" onclick="setLang('en', this)">EN</button>
                <button class="lang-btn" onclick="setLang('fr', this)">FR</button>
                <button class="lang-btn" onclick="setLang('it', this)">IT</button>
                <button class="lang-btn" onclick="setLang('de', this)">DE</button>
                <button class="lang-btn" onclick="setLang('es', this)">ES</button>
            </div>
            <div class="theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></div>
        </div>
    </header>

    <div class="app-wrapper">
        <div class="main-card">
            <div class="section-label" id="txt-personal">المعلومات الشخصية</div>
            <div class="grid">
                <div class="input-group"><label id="lbl-name">الاسم الكامل</label><input type="text" id="inName" class="required"></div>
                <div class="input-group">
                    <label id="lbl-job">المسمى الوظيفي (ذكاء اصطناعي)</label>
                    <input type="text" id="inJob" class="required" oninput="runAI_Summary()">
                </div>
            </div>
            <div class="grid">
                <div class="input-group"><label id="lbl-birth">تاريخ الميلاد</label><input type="text" id="inBirth" placeholder="DD/MM/YYYY"></div>
                <div class="input-group"><label>عدد سنوات الخبرة</label><input type="number" id="inExpYears" placeholder="مثلاً: 5" oninput="runAI_Experience()"></div>
            </div>
            <div class="grid">
                <div class="input-group"><label id="lbl-phone">رقم الهاتف</label><input type="text" id="inPhone" class="required"></div>
                <div class="input-group"><label id="lbl-email">البريد الإلكتروني</label><input type="email" id="inEmail" class="required"></div>
            </div>

            <div class="section-label" id="txt-profile">النبذة والخبرات</div>
            <div class="input-group"><label id="lbl-photo">الصورة الشخصية</label><input type="file" id="inPhoto" accept="image/*"></div>
            <div class="input-group"><label id="lbl-about">عني (النبذة الذكية - 5 أسطر)</label><textarea id="inAbout" rows="5"></textarea></div>
            <div class="input-group"><label id="lbl-exp">الخبرات المهنية (تتولد تلقائياً)</label><textarea id="inExp" rows="5"></textarea></div>
            <div class="input-group"><label id="lbl-edu">التعليم والشهادات</label><textarea id="inEdu" rows="3"></textarea></div>

            <div class="section-label" id="txt-skills">المهارات واللغات</div>
            <div class="grid">
                <div class="input-group"><label id="lbl-skills">المهارات</label><textarea id="inSkills" rows="2"></textarea></div>
                <div class="input-group"><label id="lbl-lang">اللغات</label><textarea id="inLang" rows="2"></textarea></div>
            </div>

            <button class="btn-download" onclick="generatePDF()">
                <i class="fas fa-file-pdf"></i> <span id="txt-btn">تحميل السيرة الذاتية PDF</span>
            </button>
        </div>
    </div>

    <div id="status-overlay"><div class="modal"><i class="fas fa-spinner fa-spin" style="font-size:40px; color:var(--accent)"></i><h2 id="msg-loading">جاري التحقق والمعالجة...</h2></div></div>

    <div id="pdf-render-zone">
        <div id="pdf-doc" class="pdf-page">
            <div class="pdf-sidebar">
                <div class="pdf-photo-box"><img id="outPhoto" src="" style="width:100%; height:100%; object-fit:cover;"></div>
                <div class="pdf-side-h" id="ph-contact">تواصل</div>
                <div class="pdf-side-text"><i class="fas fa-phone"></i> <span id="outPhone"></span></div>
                <div class="pdf-side-text"><i class="fas fa-envelope"></i> <span id="outEmail"></span></div>
                <div class="pdf-side-h" id="ph-skills">المهارات</div>
                <div id="outSkills" class="pdf-body-text" style="color:white; font-size:11px;"></div>
                <div class="pdf-side-h" id="ph-lang">اللغات</div>
                <div id="outLang" class="pdf-body-text" style="color:white; font-size:11px;"></div>
            </div>
            <div class="pdf-main">
                <h1 id="outName" class="pdf-name"></h1>
                <p id="outJob" class="pdf-job"></p>
                <div class="pdf-section-h" id="ph-about">الملف الشخصي</div>
                <div id="outAbout" class="pdf-body-text"></div>
                <div class="pdf-section-h" id="ph-exp">الخبرة المهنية</div>
                <div id="outExp" class="pdf-body-text"></div>
                <div class="pdf-section-h" id="ph-edu">التعليم</div>
                <div id="outEdu" class="pdf-body-text"></div>
            </div>
        </div>
    </div>

    <script>
        const i18n = {
            ar: { personal: "المعلومات الشخصية", profile: "النبذة والخبرات", skills: "المهارات واللغات", name: "الاسم الكامل", job: "المسمى الوظيفي", birth: "تاريخ الميلاد", phone: "رقم الهاتف", email: "الإيميل", photo: "الصورة", about: "عني (النبذة)", exp: "الخبرات المهنية", edu: "التعليم والشهادات", lang: "اللغات", btn: "تحميل PDF", contact: "تواصل", loading: "جاري المعالجة..." },
            en: { personal: "Personal Info", profile: "Experience", skills: "Skills & Languages", name: "Full Name", job: "Job Title", birth: "Birth Date", phone: "Phone", email: "Email", photo: "Photo", about: "Summary", exp: "Work Experience", edu: "Education", lang: "Languages", btn: "Download PDF", contact: "Contact", loading: "Processing..." },
            fr: { personal: "Infos Personnelles", profile: "Expérience", skills: "Compétences", name: "Nom Complet", job: "Titre", birth: "Date de Naissance", phone: "Téléphone", email: "Email", photo: "Photo", about: "Résumé", exp: "Expérience", edu: "Éducation", lang: "Langues", btn: "Télécharger PDF", contact: "Contact", loading: "En cours..." },
            it: { personal: "Info Personali", profile: "Esperienza", skills: "Abilità", name: "Nome Completo", job: "Titolo", birth: "Data di Nascita", phone: "Telefono", email: "Email", photo: "Foto", about: "Riepilogo", exp: "Esperienza", edu: "Istruzione", lang: "Lingue", btn: "Scarica PDF", contact: "Contatti", loading: "Elaborazione..." },
            de: { personal: "Persönliche Infos", profile: "Erfahrung", skills: "Fähigkeiten", name: "Vollständiger Name", job: "Jobtitel", birth: "Geburtsdatum", phone: "Telefon", email: "Email", photo: "Foto", about: "Zusammenfassung", exp: "Berufserfahrung", edu: "Bildung", lang: "Sprachen", btn: "PDF Herunterladen", contact: "Kontakt", loading: "Wird geladen..." },
            es: { personal: "Información Personal", profile: "Expérience", skills: "Habilidades", name: "Nombre Completo", job: "Título", birth: "Fecha de Nacimiento", phone: "Teléfono", email: "Email", photo: "Foto", about: "Resumen", exp: "Experiencia Laboral", edu: "Educación", lang: "Idiomas", btn: "Descargar PDF", contact: "Contacto", loading: "Procesando..." }
        };

        let currentLang = 'ar';

        // محرك الذكاء الاصطناعي للنبذة (5 أسطر)
        function runAI_Summary() {
            const job = document.getElementById('inJob').value;
            if(!job) return;
            const summaries = [
                `أنا ${job} طموح ومحترف، أمتلك رؤية استراتيجية واضحة في تطوير بيئة العمل.\nأسعى دائماً لتوظيف مهاراتي التقنية في حل المشكلات المعقدة وزيادة الإنتاجية.\nلدي قدرة عالية على التكيف مع التغيرات السريعة في سوق العمل والابتكار المستمر.\nأؤمن بالعمل الجماعي وروح القيادة لتحقيق رؤية المؤسسة وأهدافها بعيدة المدى.\nأبحث عن فرصة جديدة تتيح لي وضع بصمتي الاحترافية والمساهمة في النجاح الجماعي.`,
                `بصفتي ${job} خبير، أركز على تقديم حلول إبداعية تتوافق مع أعلى معايير الجودة العالمية.\nأمتلك شغفاً كبيراً بالتعلم المستمر ومواكبة أحدث التقنيات والأساليب في مجالي.\nأتميز بدقة الملاحظة والقدرة على إدارة المشاريع بكفاءة عالية وتحت ضغط العمل.\nنجحت في بناء علاقات مهنية قوية تعتمد على الثقة والاحترافية والنتائج الملموسة.\nأهدافي المهنية تتمحور حول التطوير المؤسسي والتميز في الأداء المهني اليومي.`
            ];
            document.getElementById('inAbout').value = summaries[Math.floor(Math.random() * summaries.length)];
        }

        // محرك الذكاء الاصطناعي للخبرات بناءً على السنين
        function runAI_Experience() {
            const job = document.getElementById('inJob').value || "خبير";
            const years = document.getElementById('inExpYears').value;
            if(!years) return;
            document.getElementById('inExp').value = `• أمتلك مسيرة مهنية حافلة تمتد لـ ${years} سنوات كـ ${job} مختص.\n• قمت خلالها بقيادة العديد من المشاريع الناجحة وتحقيق مستهدفات النمو المطلوبة.\n• طورت حلولاً تقنية وعملية ساهمت في تحسين سير العمل بنسبة كبيرة.\n• أشرفت على تدريب فرق العمل ونقل الخبرات لضمان استدامة الجودة.`;
        }

        function setLang(lang, btn) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('pdf-doc').className = lang === 'ar' ? 'pdf-page' : 'pdf-page ltr';
            const t = i18n[lang];
            document.getElementById('txt-personal').innerText = t.personal;
            document.getElementById('lbl-name').innerText = t.name;
            document.getElementById('txt-btn').innerText = t.btn;
            // يتم تطبيق باقي الترجمات هنا بنفس الطريقة...
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            document.querySelector('.theme-toggle i').className = document.body.classList.contains('dark-mode') ? 'fas fa-sun' : 'fas fa-moon';
        }

        async function generatePDF() {
            // التحقق من الخانات الفارغة
            const requiredFields = document.querySelectorAll('.required');
            let hasError = false;
            requiredFields.forEach(field => {
                if(!field.value) {
                    field.classList.add('error-input');
                    hasError = true;
                } else {
                    field.classList.remove('error-input');
                }
            });

            if(hasError) {
                alert("يا محمد، فضلاً أكمل الخانات المطلوبة (التي باللون الأحمر) قبل التحميل!");
                return;
            }

            document.getElementById('status-overlay').style.display = 'flex';
            
            const fields = ['Name', 'Job', 'Phone', 'Email', 'About', 'Exp', 'Edu', 'Skills', 'Lang'];
            fields.forEach(f => {
                document.getElementById('out' + f).innerText = document.getElementById('in' + f).value;
            });

            setTimeout(async () => {
                const canvas = await html2canvas(document.getElementById('pdf-doc'), { scale: 3, useCORS: true });
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 210, 297);
                pdf.save(`CV_${document.getElementById('inName').value}.pdf`);
                document.getElementById('status-overlay').style.display = 'none';
            }, 1000);
        }

        document.getElementById('inPhoto').onchange = e => {
            const reader = new FileReader();
            reader.onload = () => document.getElementById('outPhoto').src = reader.result;
            reader.readAsDataURL(e.target.files[0]);
        };
    </script>
</body>
</html>
